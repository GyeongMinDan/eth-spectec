;;
;; Constants: defined as parameterless functions
;;
dec $UINT64_MAX : uint64
def $UINT64_MAX = 18446744073709551615

dec $UINT64_MAX_SQRT : uint64
def $UINT64_MAX_SQRT = 4294967295

dec $GENESIS_SLOT : slot
def $GENESIS_SLOT = 0

dec $GENESIS_EPOCH : epoch
def $GENESIS_EPOCH = 0

dec $FAR_FUTURE_EPOCH : epoch
def $FAR_FUTURE_EPOCH = 18446744073709551615

dec $BASE_REWARDS_PER_EPOCH : uint64
def $BASE_REWARDS_PER_EPOCH = 4

dec $DEPOSIT_CONTRACT_TREE_DEPTH : uint64
def $DEPOSIT_CONTRACT_TREE_DEPTH = 32

dec $JUSTIFICATION_BITS_LENGTH : uint64
def $JUSTIFICATION_BITS_LENGTH = 4


dec $BLS_WITHDRAWAL_PREFIX : bytes1
def $BLS_WITHDRAWAL_PREFIX = 0        ;; 0x00

dec $ETH1_ADDRESS_WITHDRAWAL_PREFIX : bytes1
def $ETH1_ADDRESS_WITHDRAWAL_PREFIX = 1  ;; 0x01

dec $DOMAIN_BEACON_PROPOSER : domainType
def $DOMAIN_BEACON_PROPOSER = 0           ;; 0x00000000

dec $DOMAIN_BEACON_ATTESTER : domainType
def $DOMAIN_BEACON_ATTESTER = 16777216    ;; 0x01000000

dec $DOMAIN_RANDAO : domainType
def $DOMAIN_RANDAO = 33554432             ;; 0x02000000

dec $DOMAIN_DEPOSIT : domainType
def $DOMAIN_DEPOSIT = 50331648            ;; 0x03000000

dec $DOMAIN_VOLUNTARY_EXIT : domainType
def $DOMAIN_VOLUNTARY_EXIT = 67108864     ;; 0x04000000

dec $DOMAIN_SELECTION_PROOF : domainType
def $DOMAIN_SELECTION_PROOF = 83886080    ;; 0x05000000

dec $DOMAIN_AGGREGATE_AND_PROOF : domainType
def $DOMAIN_AGGREGATE_AND_PROOF = 100663296  ;; 0x06000000

dec $DOMAIN_APPLICATION_MASK : domainType
def $DOMAIN_APPLICATION_MASK = 1          ;; 0x00000001

dec $INTERVALS_PER_SLOT : uint64
def $INTERVALS_PER_SLOT = 3

dec $BASIS_POINTS : uint64
def $BASIS_POINTS = 10000

dec $NODE_ID_BITS : nat
def $NODE_ID_BITS = 256

dec $MAX_CONCURRENT_REQUESTS : nat
def $MAX_CONCURRENT_REQUESTS = 2

dec $TARGET_AGGREGATORS_PER_COMMITTEE_CONST : nat
def $TARGET_AGGREGATORS_PER_COMMITTEE_CONST = 16   ;; 2**4

dec $ETH_TO_GWEI : uint64
def $ETH_TO_GWEI = 1000000000

dec $SAFETY_DECAY : uint64
def $SAFETY_DECAY = 10

dec $TIMELY_SOURCE_FLAG_INDEX : nat
def $TIMELY_SOURCE_FLAG_INDEX = 0

dec $TIMELY_TARGET_FLAG_INDEX : nat
def $TIMELY_TARGET_FLAG_INDEX = 1

dec $TIMELY_HEAD_FLAG_INDEX : nat
def $TIMELY_HEAD_FLAG_INDEX = 2

dec $TIMELY_SOURCE_WEIGHT : uint64
def $TIMELY_SOURCE_WEIGHT = 14

dec $TIMELY_TARGET_WEIGHT : uint64
def $TIMELY_TARGET_WEIGHT = 26

dec $TIMELY_HEAD_WEIGHT : uint64
def $TIMELY_HEAD_WEIGHT = 14

dec $SYNC_REWARD_WEIGHT : uint64
def $SYNC_REWARD_WEIGHT = 2

dec $PROPOSER_WEIGHT : uint64
def $PROPOSER_WEIGHT = 8

dec $WEIGHT_DENOMINATOR : uint64
def $WEIGHT_DENOMINATOR = 64

dec $DOMAIN_SYNC_COMMITTEE : domainType
def $DOMAIN_SYNC_COMMITTEE = 117440512           ;; 0x07000000

dec $DOMAIN_SYNC_COMMITTEE_SELECTION_PROOF : domainType
def $DOMAIN_SYNC_COMMITTEE_SELECTION_PROOF = 134217728  ;; 0x08000000

dec $DOMAIN_CONTRIBUTION_AND_PROOF : domainType
def $DOMAIN_CONTRIBUTION_AND_PROOF = 150994944   ;; 0x09000000

dec $PARTICIPATION_FLAG_WEIGHTS : uint64*
def $PARTICIPATION_FLAG_WEIGHTS = [ $TIMELY_SOURCE_WEIGHT, $TIMELY_TARGET_WEIGHT, $TIMELY_HEAD_WEIGHT ]

;; we encode as 0 placeholder (bytes96 = int).
;; OCaml 에 bls-12-381 라이브러리가 존재하던데 이걸 사용하면?
dec $G2_POINT_AT_INFINITY : blsSignature
def $G2_POINT_AT_INFINITY = 0

dec $TARGET_AGGREGATORS_PER_SYNC_SUBCOMMITTEE : nat
def $TARGET_AGGREGATORS_PER_SYNC_SUBCOMMITTEE = 16   ;; 2**4

dec $SYNC_COMMITTEE_SUBNET_COUNT : nat
def $SYNC_COMMITTEE_SUBNET_COUNT = 4

dec $MAX_REQUEST_LIGHT_CLIENT_UPDATES : nat
def $MAX_REQUEST_LIGHT_CLIENT_UPDATES = 128          ;; 2**7

dec $SAFE_SLOTS_TO_IMPORT_OPTIMISTICALLY : nat
def $SAFE_SLOTS_TO_IMPORT_OPTIMISTICALLY = 128

dec $DOMAIN_BLS_TO_EXECUTION_CHANGE : domainType
def $DOMAIN_BLS_TO_EXECUTION_CHANGE = 167772160      ;; 0x0A000000


;;
;; Preset vars (mainnet Configuration)  →  parameterless functions
;;

dec $MAX_COMMITTEES_PER_SLOT : uint64
def $MAX_COMMITTEES_PER_SLOT = 64

dec $TARGET_COMMITTEE_SIZE : uint64
def $TARGET_COMMITTEE_SIZE = 128

dec $MAX_VALIDATORS_PER_COMMITTEE : uint64
def $MAX_VALIDATORS_PER_COMMITTEE = 2048

dec $SHUFFLE_ROUND_COUNT : uint64
def $SHUFFLE_ROUND_COUNT = 90

dec $HYSTERESIS_QUOTIENT : uint64
def $HYSTERESIS_QUOTIENT = 4

dec $HYSTERESIS_DOWNWARD_MULTIPLIER : uint64
def $HYSTERESIS_DOWNWARD_MULTIPLIER = 1

dec $HYSTERESIS_UPWARD_MULTIPLIER : uint64
def $HYSTERESIS_UPWARD_MULTIPLIER = 5

dec $MIN_DEPOSIT_AMOUNT : gwei
def $MIN_DEPOSIT_AMOUNT = 1000000000

dec $MAX_EFFECTIVE_BALANCE : gwei
def $MAX_EFFECTIVE_BALANCE = 32000000000

dec $EFFECTIVE_BALANCE_INCREMENT : gwei
def $EFFECTIVE_BALANCE_INCREMENT = 1000000000

dec $MIN_ATTESTATION_INCLUSION_DELAY : uint64
def $MIN_ATTESTATION_INCLUSION_DELAY = 1

dec $SLOTS_PER_EPOCH : uint64
def $SLOTS_PER_EPOCH = 32

dec $MIN_SEED_LOOKAHEAD : uint64
def $MIN_SEED_LOOKAHEAD = 1

dec $MAX_SEED_LOOKAHEAD : uint64
def $MAX_SEED_LOOKAHEAD = 4

dec $MIN_EPOCHS_TO_INACTIVITY_PENALTY : uint64
def $MIN_EPOCHS_TO_INACTIVITY_PENALTY = 4

dec $EPOCHS_PER_ETH1_VOTING_PERIOD : uint64
def $EPOCHS_PER_ETH1_VOTING_PERIOD = 64

dec $SLOTS_PER_HISTORICAL_ROOT : uint64
def $SLOTS_PER_HISTORICAL_ROOT = 8192

dec $EPOCHS_PER_HISTORICAL_VECTOR : uint64
def $EPOCHS_PER_HISTORICAL_VECTOR = 65536

dec $EPOCHS_PER_SLASHINGS_VECTOR : uint64
def $EPOCHS_PER_SLASHINGS_VECTOR = 8192

dec $HISTORICAL_ROOTS_LIMIT : uint64
def $HISTORICAL_ROOTS_LIMIT = 16777216

dec $VALIDATOR_REGISTRY_LIMIT : uint64
def $VALIDATOR_REGISTRY_LIMIT = 1099511627776

dec $BASE_REWARD_FACTOR : uint64
def $BASE_REWARD_FACTOR = 64

dec $WHISTLEBLOWER_REWARD_QUOTIENT : uint64
def $WHISTLEBLOWER_REWARD_QUOTIENT = 512

dec $PROPOSER_REWARD_QUOTIENT : uint64
def $PROPOSER_REWARD_QUOTIENT = 8

dec $INACTIVITY_PENALTY_QUOTIENT : uint64
def $INACTIVITY_PENALTY_QUOTIENT = 67108864

dec $MIN_SLASHING_PENALTY_QUOTIENT : uint64
def $MIN_SLASHING_PENALTY_QUOTIENT = 128

dec $PROPORTIONAL_SLASHING_MULTIPLIER : uint64
def $PROPORTIONAL_SLASHING_MULTIPLIER = 1

dec $MAX_PROPOSER_SLASHINGS : nat
def $MAX_PROPOSER_SLASHINGS = 16

dec $MAX_ATTESTER_SLASHINGS : nat
def $MAX_ATTESTER_SLASHINGS = 2

dec $MAX_ATTESTATIONS : nat
def $MAX_ATTESTATIONS = 128

dec $MAX_DEPOSITS : nat
def $MAX_DEPOSITS = 16

dec $MAX_VOLUNTARY_EXITS : nat
def $MAX_VOLUNTARY_EXITS = 16

dec $INACTIVITY_PENALTY_QUOTIENT_ALTAIR : uint64
def $INACTIVITY_PENALTY_QUOTIENT_ALTAIR = 50331648

dec $MIN_SLASHING_PENALTY_QUOTIENT_ALTAIR : uint64
def $MIN_SLASHING_PENALTY_QUOTIENT_ALTAIR = 64

dec $PROPORTIONAL_SLASHING_MULTIPLIER_ALTAIR : uint64
def $PROPORTIONAL_SLASHING_MULTIPLIER_ALTAIR = 2

dec $SYNC_COMMITTEE_SIZE : uint64
def $SYNC_COMMITTEE_SIZE = 512

dec $EPOCHS_PER_SYNC_COMMITTEE_PERIOD : uint64
def $EPOCHS_PER_SYNC_COMMITTEE_PERIOD = 256

dec $MIN_SYNC_COMMITTEE_PARTICIPANTS : nat
def $MIN_SYNC_COMMITTEE_PARTICIPANTS = 1

dec $UPDATE_TIMEOUT : nat
def $UPDATE_TIMEOUT = 8192

dec $INACTIVITY_PENALTY_QUOTIENT_BELLATRIX : uint64
def $INACTIVITY_PENALTY_QUOTIENT_BELLATRIX = 16777216

dec $MIN_SLASHING_PENALTY_QUOTIENT_BELLATRIX : uint64
def $MIN_SLASHING_PENALTY_QUOTIENT_BELLATRIX = 32

dec $PROPORTIONAL_SLASHING_MULTIPLIER_BELLATRIX : uint64
def $PROPORTIONAL_SLASHING_MULTIPLIER_BELLATRIX = 3

dec $MAX_BYTES_PER_TRANSACTION : uint64
def $MAX_BYTES_PER_TRANSACTION = 1073741824

dec $MAX_TRANSACTIONS_PER_PAYLOAD : uint64
def $MAX_TRANSACTIONS_PER_PAYLOAD = 1048576

dec $BYTES_PER_LOGS_BLOOM : uint64
def $BYTES_PER_LOGS_BLOOM = 256

dec $MAX_EXTRA_DATA_BYTES : nat
def $MAX_EXTRA_DATA_BYTES = 32

dec $MAX_BLS_TO_EXECUTION_CHANGES : nat
def $MAX_BLS_TO_EXECUTION_CHANGES = 16

dec $MAX_WITHDRAWALS_PER_PAYLOAD : uint64
def $MAX_WITHDRAWALS_PER_PAYLOAD = 16

dec $MAX_VALIDATORS_PER_WITHDRAWALS_SWEEP : nat
def $MAX_VALIDATORS_PER_WITHDRAWALS_SWEEP = 16384

;; Configuration-derived constants (parameterless functions)

dec $MIN_GENESIS_ACTIVE_VALIDATOR_COUNT : uint64
def $MIN_GENESIS_ACTIVE_VALIDATOR_COUNT = 16384

dec $MIN_GENESIS_TIME : uint64
def $MIN_GENESIS_TIME = 1606824000

dec $GENESIS_FORK_VERSION : version
def $GENESIS_FORK_VERSION = 0                     ;; 0x00000000

dec $GENESIS_DELAY : uint64
def $GENESIS_DELAY = 604800

dec $SECONDS_PER_SLOT : uint64
def $SECONDS_PER_SLOT = 12

dec $SLOT_DURATION_MS : uint64
def $SLOT_DURATION_MS = 12000

dec $SECONDS_PER_ETH1_BLOCK : uint64
def $SECONDS_PER_ETH1_BLOCK = 14

dec $MIN_VALIDATOR_WITHDRAWABILITY_DELAY : uint64
def $MIN_VALIDATOR_WITHDRAWABILITY_DELAY = 256

dec $SHARD_COMMITTEE_PERIOD : uint64
def $SHARD_COMMITTEE_PERIOD = 256

dec $ETH1_FOLLOW_DISTANCE : uint64
def $ETH1_FOLLOW_DISTANCE = 2048

dec $EJECTION_BALANCE : gwei
def $EJECTION_BALANCE = 16000000000

dec $MIN_PER_EPOCH_CHURN_LIMIT : uint64
def $MIN_PER_EPOCH_CHURN_LIMIT = 4

dec $CHURN_LIMIT_QUOTIENT : uint64
def $CHURN_LIMIT_QUOTIENT = 65536

dec $PROPOSER_SCORE_BOOST : uint64
def $PROPOSER_SCORE_BOOST = 40

dec $REORG_HEAD_WEIGHT_THRESHOLD : uint64
def $REORG_HEAD_WEIGHT_THRESHOLD = 20

dec $REORG_PARENT_WEIGHT_THRESHOLD : uint64
def $REORG_PARENT_WEIGHT_THRESHOLD = 160

dec $REORG_MAX_EPOCHS_SINCE_FINALIZATION : epoch
def $REORG_MAX_EPOCHS_SINCE_FINALIZATION = 2

dec $PROPOSER_REORG_CUTOFF_BPS : uint64
def $PROPOSER_REORG_CUTOFF_BPS = 1667

dec $MAX_PAYLOAD_SIZE : nat
def $MAX_PAYLOAD_SIZE = 10485760

dec $MAX_REQUEST_BLOCKS : nat
def $MAX_REQUEST_BLOCKS = 1024

dec $EPOCHS_PER_SUBNET_SUBSCRIPTION : nat
def $EPOCHS_PER_SUBNET_SUBSCRIPTION = 256

dec $MIN_EPOCHS_FOR_BLOCK_REQUESTS : nat
def $MIN_EPOCHS_FOR_BLOCK_REQUESTS = 33024

dec $ATTESTATION_PROPAGATION_SLOT_RANGE : nat
def $ATTESTATION_PROPAGATION_SLOT_RANGE = 32

dec $MAXIMUM_GOSSIP_CLOCK_DISPARITY : nat
def $MAXIMUM_GOSSIP_CLOCK_DISPARITY = 500

dec $MESSAGE_DOMAIN_INVALID_SNAPPY : domainType
def $MESSAGE_DOMAIN_INVALID_SNAPPY = 0            ;; 0x00000000

dec $MESSAGE_DOMAIN_VALID_SNAPPY : domainType
def $MESSAGE_DOMAIN_VALID_SNAPPY = 16777216       ;; 0x01000000

dec $SUBNETS_PER_NODE : nat
def $SUBNETS_PER_NODE = 2

dec $ATTESTATION_SUBNET_COUNT : nat
def $ATTESTATION_SUBNET_COUNT = 64

dec $ATTESTATION_SUBNET_EXTRA_BITS : nat
def $ATTESTATION_SUBNET_EXTRA_BITS = 0

dec $ATTESTATION_SUBNET_PREFIX_BITS : nat
def $ATTESTATION_SUBNET_PREFIX_BITS = 6

dec $ATTESTATION_DUE_BPS : uint64
def $ATTESTATION_DUE_BPS = 3333

dec $AGGREGATE_DUE_BPS : uint64
def $AGGREGATE_DUE_BPS = 6667

dec $INACTIVITY_SCORE_BIAS : uint64
def $INACTIVITY_SCORE_BIAS = 4

dec $INACTIVITY_SCORE_RECOVERY_RATE : uint64
def $INACTIVITY_SCORE_RECOVERY_RATE = 16

dec $ALTAIR_FORK_VERSION : version
def $ALTAIR_FORK_VERSION = 16777216              ;; 0x01000000

dec $ALTAIR_FORK_EPOCH : epoch
def $ALTAIR_FORK_EPOCH = 74240

dec $SYNC_MESSAGE_DUE_BPS : uint64
def $SYNC_MESSAGE_DUE_BPS = 3333

dec $CONTRIBUTION_DUE_BPS : uint64
def $CONTRIBUTION_DUE_BPS = 6667

dec $TERMINAL_TOTAL_DIFFICULTY : uint256
def $TERMINAL_TOTAL_DIFFICULTY = 58750000000000000000000

dec $TERMINAL_BLOCK_HASH : hash32
def $TERMINAL_BLOCK_HASH = 0                      ;; 0x00..00 (32 bytes)

dec $TERMINAL_BLOCK_HASH_ACTIVATION_EPOCH : epoch
def $TERMINAL_BLOCK_HASH_ACTIVATION_EPOCH = $FAR_FUTURE_EPOCH

dec $BELLATRIX_FORK_VERSION : version
def $BELLATRIX_FORK_VERSION = 33554432            ;; 0x02000000

dec $BELLATRIX_FORK_EPOCH : epoch
def $BELLATRIX_FORK_EPOCH = 144896

dec $CAPELLA_FORK_VERSION : version
def $CAPELLA_FORK_VERSION = 50331648              ;; 0x03000000

dec $CAPELLA_FORK_EPOCH : epoch
def $CAPELLA_FORK_EPOCH = 194048

;; 0x0000....
;; not defined in eth2spec but needed
dec $ZERO_ROOT : root
def $ZERO_ROOT = 0